<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	<title>Node Auth Fundamentals</title>
</head>
<body>
	<h1>Hello</h1>
	<h3>Register Form</h3>
	<form id="register-form">
		<input type="email" name="email"/>
		<input type="password" name="password"/>
		<button type="submit">Submit</button>
	</form>
	<script type="text/javascript">
	;(() => {
		const form = document.getElementById('register-form')
		form.addEventListener('submit', async (e) => {
			e.preventDefault();
			try {
				const values = Object.values(form).reduce((obj, field) => {
					if (field.name) {
						obj[field.name] = field.value					
					}
					return obj
				}, {})
				// console.log('values', values)
				const res = await fetch('/api/register', {
					method: 'POST',
					body: JSON.stringify(values),
					headers: {
						'Content-Type': 'application/json; charset=UTF-8',
					},
				})
				console.log(res)
			} catch (e) {
				console.error(e)
			}
		})
	})()
	</script>
</body>
</html>